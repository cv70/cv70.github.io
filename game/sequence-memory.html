<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sequence Memory</title>
  <style>
    :root{--cell:64px;--gap:10px}
    *{box-sizing:border-box}
    body{margin:0;background:#f0f4f8;font-family:system-ui, Arial}
    .wrap{max-width:820px;margin:0 auto;padding:16px}
    h1{font-size:1.4rem;margin:6px 0 12px}
    .grid{display:grid;grid-template-columns:repeat(5, var(--cell));gap:var(--gap);justify-content:center}
    .cell{width:var(--cell);height:var(--cell);border-radius:8px;background:#fff;border:1px solid #ccc;display:flex;align-items:center;justify-content:center;font-size:20px}
    .cell.active{background:#ffd966}
    button{padding:8px 12px;border-radius:6px;border:1px solid #888;background:#fff;cursor:pointer}
    #status{margin-left:8px;color:#555}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Sequence Memory</h1>
    <div class="controls" style="display:flex;gap:8px;align-items:center;margin-bottom:8px">
      <button id="startBtn">Start</button>
      <span id="status">Click Start</span>
    </div>
    <div class="grid" id="grid"></div>
  </div>

  <script>
    const gridEl = document.getElementById('grid');
    const startBtn = document.getElementById('startBtn');
    const statusEl = document.getElementById('status');
    let sequence = [];
    let user = [];
    const digits = [0,1,2,3,4,5,6,7,8,9];
    function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } }
    function render(){ gridEl.innerHTML=''; digits.forEach(n=>{ const c=document.createElement('div'); c.className='cell'; c.textContent=n; c.dataset.num=n; c.addEventListener('click', ()=>{ onClick(n, c); }); gridEl.appendChild(c); }); }
    function onClick(n, cell){ if(!sequence.length) return; if(user.length>=sequence.length) return; cell.classList.add('active'); setTimeout(()=> cell.classList.remove('active'), 150); user.push(n); if(user.length===sequence.length){ const ok = user.every((v,i)=> v===sequence[i]); statusEl.textContent = ok ? 'Correct' : 'Incorrect'; if(ok){ setTimeout(()=>{ addRound(); }, 600); } else { setTimeout(()=>{ startGame(true); }, 900); } } }
    function addRound(){ user=[]; sequence.push(Math.floor(Math.random()*10)); statusEl.textContent = `Level ${sequence.length}`; showSequence(); }
    function showSequence(){ let i=0; const arr = sequence; gridEl.querySelectorAll('.cell').forEach(c=>c.classList.remove('active'));
      const t = setInterval(()=>{ if(i>=arr.length){ clearInterval(t); return; } const n = arr[i++]; // highlight corresponding cell
        const cell = Array.from(gridEl.children).find(el => parseInt(el.dataset.num,10)===n);
        if(cell){ cell.classList.add('active'); setTimeout(()=>cell.classList.remove('active'), 250); }
      }, 500); statusEl.textContent = `Memorize the sequence (${sequence.length})`;
    }
    function startGame(soft=false){ sequence=[]; user=[]; render(); addRound(); }
    startBtn.addEventListener('click', ()=>{ startGame(); statusEl.textContent = 'Memorize sequence'; });
    // Initialize
    render();
  </script>
</body>
</html>
