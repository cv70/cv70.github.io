<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Speed Math</title>
  <style>
    :root{--bg:#0f1020;--card:#1e1b2b;--fg:#e9e9e9;--accent:#7bd389;--muted:#aab4c5}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:radial-gradient(circle at 20% -10%, #2a1b4f 0%, #0f1020 40%), radial-gradient(circle at 100% 0%, #1a2b55 0%, #0f1020 40%), #0f1020;color:var(--fg);font-family:Arial, sans-serif;}
    .wrap{max-width:720px;margin:40px auto;padding:20px;border-radius:12px;background:linear-gradient(#2a2540, #1a153b);box-shadow:0 10px 30px rgba(0,0,0,.4)}
    h1{margin:0 0 10px;font-size:28px;text-align:center}
    .row{display:flex;gap:20px;flex-wrap:wrap;justify-content:space-between;align-items:center}
    .panel{flex:1 1 260px;padding:16px;border-radius:12px;background:#222;min-width:240px}
    #problem{font-size:48px;letter-spacing:2px;margin:20px 0;text-align:center}
    input[type="number"]{width:100%;padding:12px 14px;font-size:20px;border-radius:8px;border:1px solid #555;background:#111;color:#fff}
    button{padding:12px 16px;font-size:16px;border-radius:8px;border:0;background:#4CAF50;color:white;cursor:pointer}
    button:disabled{opacity:.6;cursor:not-allowed}
    .stat{font-size:16px;color:#ddd}
    .high{font-weight:bold}
    #footer{text-align:center;margin-top:18px;color:var(--muted);font-size:12px}
    @media (max-width: 600px){
      #problem{font-size:40px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Speed Math</h1>
    <div class="row">
      <div class="panel" aria-label="problem panel" style="text-align:center">
        <div id="problem" aria-live="polite">0 + 0 = ?</div>
        <input id="answer" type="number" autocomplete="off" placeholder="Your answer" />
        <div style="margin-top:8px;display:flex;gap:8px;justify-content:center;">
          <button id="submit">Submit</button>
          <button id="skip">Skip</button>
        </div>
        <div class="stat" style="margin-top:8px;" id="timerLabel">Time per question: 15s</div>
      </div>
      <div class="panel" aria-label="score panel" style="min-width:180px;text-align:left">
        <div class="stat">Score: <span id="score">0</span></div>
        <div class="stat">High Score: <span id="highScore">0</span></div>
        <div class="stat">Question: <span id="qnum">1</span></div>
        <div class="stat" style="margin-top:8px;">Hint: Quick mental math boosts score.</div>
      </div>
    </div>
    <div id="feedback" class="stat" style="text-align:center;margin-top:12px;height:20px"></div>
  </div>
  <div id="footer">Tip: Press Enter to submit. High score saved locally in your browser.</div>
  <script>
    (function(){
      const TIME_LIMIT = 15; // seconds per question
      let score = 0;
      let high = Number(localStorage.getItem('speedmath_high')||'0');
      let qnum = 1;
      let timer = TIME_LIMIT;
      let interval = null;
      let currentAnswer = 0;

      const problemEl = document.getElementById('problem');
      const answerEl = document.getElementById('answer');
      const submitBtn = document.getElementById('submit');
      const skipBtn = document.getElementById('skip');
      const timerLabel = document.getElementById('timerLabel');
      const scoreEl = document.getElementById('score');
      const highEl = document.getElementById('highScore');
      const qnumEl = document.getElementById('qnum');
      const feedback = document.getElementById('feedback');

      function rand(min,max){ return Math.floor(Math.random()*(max-min+1))+min; }
      function newQuestion(){
        const ops = ['+','-','*'];
        const op = ops[rand(0,ops.length-1)];
        let a,b; 
        if(op === '+'){
          a = rand(0,20); b = rand(0,20);
        } else if(op === '-'){
          b = rand(0,20); a = rand(b, b+20); // ensure a>=b
        } else {
          a = rand(0,12); b = rand(0,12);
        }
        currentAnswer = op==='+'? a+b : op==='-'? a-b : a*b;
        problemEl.textContent = `${a} ${op} ${b} = ?`;
        answerEl.value = '';
        answerEl.focus();
        // reset timer
        timer = TIME_LIMIT;
        timerLabel.textContent = `Time per question: ${TIME_LIMIT}s`;
        if(interval) clearInterval(interval);
        interval = setInterval(()=>{
          timer--;
          timerLabel.textContent = `Time left: ${timer}s`;
          if(timer<=0){
            clearInterval(interval);
            feedback.textContent = 'Time is up!';
            setTimeout(()=>{ feedback.textContent=''; nextQuestion(true); }, 500);
          }
        },1000);
        qnumEl.textContent = qnum;
      }

      function nextQuestion(skipWrong){
        qnum++;
        newQuestion();
      }

      function submitAnswer(){
        const val = Number(answerEl.value);
        if(Number.isNaN(val)) { feedback.textContent = 'Enter a number'; return; }
        if(val === currentAnswer){
          score += 10;
          scoreEl.textContent = score;
          feedback.textContent = 'Correct!';
          if(score > high){ high = score; localStorage.setItem('speedmath_high', String(high)); highEl.textContent = high; }
        } else {
          feedback.textContent = 'Wrong.';
        }
        setTimeout(()=>{ feedback.textContent=''; nextQuestion(false); }, 350);
      }

      // Init
      highEl.textContent = high;
      submitBtn.addEventListener('click', ()=>{ submitAnswer(); });
      answerEl.addEventListener('keydown', (e)=>{ if(e.key==='Enter'){ submitAnswer(); } });
      skipBtn.addEventListener('click', ()=>{ feedback.textContent=''; nextQuestion(true); });
      // Start first question
      newQuestion();
    })();
  </script>
</body>
</html>
