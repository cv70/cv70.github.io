<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>8-Puzzle Spatial Reasoning</title>
  <style>
    :root{--size:88px;--gap:8px}
    *{box-sizing:border-box}
    body{margin:0;background:#f5f7fb;font-family:system-ui,Arial}
    .wrap{max-width:720px;margin:0 auto;padding:16px}
    h1{font-size:1.4rem;margin:6px 0 12px}
    .board{display:grid;grid-template-columns:repeat(3, var(--size));gap:var(--gap);justify-content:center}
    .tile{width:var(--size);height:var(--size);border-radius:8px;border:1px solid #ccc;background:#fff;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:1.2rem;cursor:pointer}
    .empty{background:#eee}
    .info{margin-top:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>8-Puzzle (Spatial Reasoning)</h1>
    <div class="board" id="board"></div>
    <div class="info" id="status">Move tiles by clicking adjacent tiles into the empty space.</div>
    <div class="row" style="margin-top:8px;display:flex;gap:8px">
      <button id="shuffleBtn">Shuffle</button>
      <button id="solveBtn">Reset</button>
    </div>
  </div>

  <script>
    const boardEl = document.getElementById('board');
    const statusEl = document.getElementById('status');
    const shuffleBtn = document.getElementById('shuffleBtn');
    const solveBtn = document.getElementById('solveBtn');
    let tiles = [];
    // Create solved state
    function createSolved(){
      const arr = [1,2,3,4,5,6,7,8,0]; // 0 represents empty
      return arr;
    }
    function render(state){ boardEl.innerHTML=''; for(let i=0;i<state.length;i++){ const v=state[i]; const d=document.createElement('div'); d.className='tile'+(v===0?' empty':'' ); d.textContent= v===0? '' : v; d.dataset.index=i; d.addEventListener('click', ()=>{ move(i); }); boardEl.appendChild(d);} }
    function findEmpty(state){ return state.indexOf(0); }
    function canMove(index,state){ const empty = findEmpty(state); const r1 = Math.floor(index/3), c1 = index%3; const re = Math.floor(empty/3), ce = empty%3; return (Math.abs(r1-re)+Math.abs(c1-ce))===1; }
    function move(index){ const empty = findEmpty(tiles); if(!canMove(index, tiles)) return; // swap
      [tiles[index], tiles[empty]] = [tiles[empty], tiles[index]]; render(tiles);
      statusEl.textContent = ''; if(isSolved()) statusEl.textContent = 'Solved!';
    }
    function isSolved(){ for(let i=0;i<8;i++){ if(tiles[i] !== i+1) return false; } return tiles[8]===0; }
    function shuffleState(){ // perform random valid moves from solved state
      const moves = 40; for(let k=0;k<moves;k++){ const empty = tiles.indexOf(0); const neighbors = []; const r = Math.floor(empty/3), c = empty%3; if(r>0) neighbors.push(empty-3); if(r<2) neighbors.push(empty+3); if(c>0) neighbors.push(empty-1); if(c<2) neighbors.push(empty+1); const pick = neighbors[Math.floor(Math.random()*neighbors.length)]; [tiles[empty], tiles[pick]] = [tiles[pick], tiles[empty]]; }
      render(tiles);
    }
    // Init
    function init(){ tiles = createSolved(); render(tiles); }
    shuffleBtn.addEventListener('click', ()=>{ shuffleState(); statusEl.textContent='Shuffled'; });
    solveBtn.addEventListener('click', ()=>{ init(); statusEl.textContent='Reset to solved'; tiles = createSolved(); render(tiles); });
    init();
  </script>
</body>
</html>
